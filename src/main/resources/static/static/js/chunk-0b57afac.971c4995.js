(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b57afac"],{"6c35":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[i("div",[i("i",{staticClass:"el-icon-search"}),i("span",[e._v("查询条件")]),i("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(t){return e.handleResetSearch()}}},[e._v("\n        重置\n      ")]),i("el-button",{staticStyle:{float:"right"},attrs:{disabled:!e.$checkMenuShow("role:list"),type:"primary",size:"small"},on:{click:function(t){return e.handleSearchList()}}},[e._v("\n        确认查询\n      ")])],1),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-form",{ref:"queryForm",attrs:{inline:!0,model:e.queryParams,size:"small","label-width":"140px"}},[i("el-form-item",{attrs:{label:"角色名："}},[i("el-input",{staticClass:"input-width",attrs:{placeholder:"用户名"},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1)],1)],1)]),i("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[i("i",{staticClass:"el-icon-tickets"}),i("span",[e._v("角色列表")]),i("el-button",{staticClass:"btn-add",staticStyle:{"margin-left":"20px"},attrs:{disabled:!e.$checkMenuShow("role:add"),type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("\n      添加\n    ")])],1),i("div",{staticClass:"table-container"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"roleTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:"","highlight-current-row":"","row-key":"id"}},[i("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),i("el-table-column",{attrs:{type:"index",width:"50"}}),i("el-table-column",{attrs:{prop:"name",label:"角色名",width:"150"}}),i("el-table-column",{attrs:{prop:"description",label:"描述",width:"160"}}),i("el-table-column",{attrs:{prop:"insertOn",label:"创建日期",width:"160"}}),i("el-table-column",{attrs:{prop:"insertByName",label:"创建人",width:"160"}}),i("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{disabled:!e.$checkMenuShow("role:addPermission"),type:"primary",size:"small"},on:{click:function(i){return e.handlePemissionRelation(t.$index,t.row)}}},[e._v("\n            授权菜单\n          ")]),i("el-button",{attrs:{disabled:!e.$checkMenuShow("role:update"),type:"success",size:"small"},on:{click:function(i){return e.handleUpdate(t.$index,t.row)}}},[e._v("\n            修改\n          ")]),i("el-button",{attrs:{disabled:!e.$checkMenuShow("role:delete"),type:"danger",size:"small"},on:{click:function(i){return e.handleDelete(t.$index,t.row)}}},[e._v("\n            删除\n          ")])]}}])})],1)],1),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","page-size":e.queryParams.pageObj.pageSize,"current-page":e.queryParams.pageObj.pageNum,total:e.listTotal},on:{"update:currentPage":function(t){return e.$set(e.queryParams.pageObj,"pageNum",t)},"update:current-page":function(t){return e.$set(e.queryParams.pageObj,"pageNum",t)},"current-change":e.handlePageCurrentChange}})],1),i("el-dialog",{attrs:{title:e.isEdit?"修改用户":"添加用户",visible:e.roleEditDialogVisible,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(t){e.roleEditDialogVisible=t},open:e.handlerRoleEditDialogOpen}},[i("el-form",{ref:"roleEditForm",attrs:{model:e.roleEdit,rules:e.rules,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"角色名：",prop:"name"}},[i("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:e.roleEdit.name,callback:function(t){e.$set(e.roleEdit,"name",t)},expression:"roleEdit.name"}})],1),i("el-form-item",{attrs:{label:"描述：",prop:"description"}},[i("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:e.roleEdit.description,callback:function(t){e.$set(e.roleEdit,"description",t)},expression:"roleEdit.description"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.roleEditDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleRoleEditDialogConfirm()}}},[e._v("确 定")])],1)],1),i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.pemissionListLoading,expression:"pemissionListLoading"}],attrs:{title:"授权菜单",visible:e.pemissionDialogVisible,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(t){e.pemissionDialogVisible=t}}},[i("el-tree",{ref:"pemissionTree",attrs:{props:e.pemissionProps,data:e.pemissionList,"node-key":"id","check-strictly":!0,"show-checkbox":"","default-expand-all":!0,"default-checked-keys":e.pemissionCheckId}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.pemissionDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handlePemissionDialogConfirm()}}},[e._v("确 定")])],1)],1)],1)},a=[],n=(i("7f7f"),i("cc5e")),l={name:"",pageObj:{pageNum:1,pageSize:10}},o={id:"",name:"",description:""},r={components:{},data:function(){return{queryParams:Object.assign({},l),roleEdit:Object.assign({},o),listLoading:!1,list:[],listTotal:null,roleEditDialogVisible:!1,isEdit:!1,editPassword:!1,rules:{name:{required:!0,message:"请输入角色名称",trigger:"blur"}},pemissionProps:{label:"name",children:"childList"},roleIdSelect:null,pemissionListLoading:!1,pemissionList:[],pemissionCheckId:[677088056477483e4],pemissionDialogVisible:!1}},computed:{routerKey:function(){return this.$route.path},queryParamsTrans:function(){var e={},t=this.queryParams,i=t.name,s=t.pageObj;return i&&(e.name=i),e.pageNum=s.pageNum,e.pageSize=s.pageSize,e}},created:function(){this.getList()},methods:{handleSearchList:function(){this.getList()},handleResetSearch:function(){this.queryParams=Object.assign({},l)},handlePemissionRelation:function(e,t){var i=this;this.pemissionDialogVisible=!0,this.pemissionCheckId=[],this.roleIdSelect=t.id,n["a"].rolePermissionList(t.id).then((function(e){var t=e.data;i.pemissionList=t.allList,i.pemissionCheckId=t.checkId}))},handleUpdate:function(e,t){this.roleEditDialogVisible=!0,this.isEdit=!0,this.roleEdit=Object.assign({},t)},handleDelete:function(e,t){var i=this;this.$confirm("是否要删除此人员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n["a"].remove(t.id).then((function(e){i.$message({type:"success",message:"删除成功!"}),i.getList()}))}))},handleAdd:function(){this.roleEditDialogVisible=!0,this.isEdit=!1,this.roleEdit=Object.assign({},o)},handlerRoleEditDialogOpen:function(){},handleRoleEditDialogConfirm:function(){var e=this;this.$refs.roleEditForm.validate((function(t){if(!t)return!1;e.isEdit?n["a"].update(e.roleEdit).then((function(t){e.$message({message:t.data,type:"success"}),e.roleEditDialogVisible=!1,e.getList()})):n["a"].create(e.roleEdit).then((function(t){e.$message({message:t.data,type:"success"}),e.roleEditDialogVisible=!1,e.getList()}))}))},handlePemissionDialogConfirm:function(){var e=this,t=this.roleIdSelect,i=this.$refs.pemissionTree.getCheckedKeys();n["a"].roleAddPermissions({roleId:t,checkId:i}).then((function(t){e.$message({message:t.data,type:"success"}),e.pemissionDialogVisible=!1}))},getList:function(){var e=this;this.listLoading=!0,n["a"].fetchList(this.queryParamsTrans).then((function(t){e.listLoading=!1;var i=t.data,s=i.list,a=i.total;e.list=s,e.listTotal=a})).catch((function(){e.listLoading=!1}))},handlePageCurrentChange:function(e){this.queryParams.pageNum=e,this.getList()},loadPemission:function(){}}},c=r,d=i("2877"),u=Object(d["a"])(c,s,a,!1,null,"ad4a8222",null);t["default"]=u.exports},cc5e:function(e,t,i){"use strict";var s=i("b775");function a(e){return Object(s["a"])({url:"/sysRole/list",method:"post",params:e})}function n(e){return Object(s["a"])({url:"/sysRole/create",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/sysRole/update",method:"post",data:e})}function o(e){return Object(s["a"])({url:"/sysRole/delete/"+e,method:"post"})}function r(e){return Object(s["a"])({url:"/sysRole/rolePermissionList/"+e,method:"post"})}function c(e){return Object(s["a"])({url:"/sysRole/roleAddPermissions",method:"post",data:e})}t["a"]={fetchList:a,create:n,update:l,remove:o,rolePermissionList:r,roleAddPermissions:c}}}]);