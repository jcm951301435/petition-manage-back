(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-87e6841e"],{cc5e:function(e,t,s){"use strict";var a=s("b775");function r(e){return Object(a["a"])({url:"/sysRole/list",method:"post",params:e})}function i(e){return Object(a["a"])({url:"/sysRole/create",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/sysRole/update",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/sysRole/delete/"+e,method:"post"})}function n(e){return Object(a["a"])({url:"/sysRole/rolePermissionList/"+e,method:"post"})}function d(e){return Object(a["a"])({url:"/sysRole/roleAddPermissions",method:"post",data:e})}t["a"]={fetchList:r,create:i,update:o,remove:l,rolePermissionList:n,roleAddPermissions:d}},e382:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[s("div",[s("i",{staticClass:"el-icon-search"}),s("span",[e._v("查询条件")]),s("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(t){return e.handleResetSearch()}}},[e._v("\n        重置\n      ")]),s("el-button",{staticStyle:{float:"right"},attrs:{disabled:!e.$checkMenuShow("user:list"),type:"primary",size:"small"},on:{click:function(t){return e.handleSearchList()}}},[e._v("\n        确认查询\n      ")])],1),s("div",{staticStyle:{"margin-top":"15px"}},[s("el-form",{ref:"queryForm",attrs:{inline:!0,model:e.queryParams,size:"small","label-width":"140px"}},[s("el-form-item",{attrs:{label:"用户名："}},[s("el-input",{staticClass:"input-width",attrs:{placeholder:"用户名"},model:{value:e.queryParams.username,callback:function(t){e.$set(e.queryParams,"username",t)},expression:"queryParams.username"}})],1),s("el-form-item",{attrs:{label:"姓名:"}},[s("el-input",{staticClass:"input-width",attrs:{placeholder:"姓名"},model:{value:e.queryParams.realName,callback:function(t){e.$set(e.queryParams,"realName",t)},expression:"queryParams.realName"}})],1),s("el-form-item",{attrs:{label:"创建日期："}},[s("el-date-picker",{attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.queryParams.insertOnRange,callback:function(t){e.$set(e.queryParams,"insertOnRange",t)},expression:"queryParams.insertOnRange"}})],1)],1)],1)]),s("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[s("i",{staticClass:"el-icon-tickets"}),s("span",[e._v("用户列表")]),s("el-button",{staticClass:"btn-add",staticStyle:{"margin-left":"20px"},attrs:{disabled:!e.$checkMenuShow("user:add"),type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("\n      添加\n    ")])],1),s("div",{staticClass:"table-container"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"userTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:"","highlight-current-row":"","row-key":"id"}},[s("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),s("el-table-column",{attrs:{type:"index",width:"50"}}),s("el-table-column",{attrs:{prop:"username",label:"用户名",width:"150"}}),s("el-table-column",{attrs:{prop:"realName",label:"姓名",width:"160"}}),s("el-table-column",{attrs:{prop:"roleName",label:"角色",width:"160"}}),s("el-table-column",{attrs:{prop:"insertOn",label:"创建日期",width:"160"}}),s("el-table-column",{attrs:{prop:"insertByName",label:"创建人",width:"160"}}),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{disabled:!e.$checkMenuShow("user:update"),type:"success",size:"small"},on:{click:function(s){return e.handleUpdate(t.$index,t.row)}}},[e._v("\n            修改\n          ")]),s("el-button",{attrs:{disabled:!e.$checkMenuShow("user:delete"),type:"danger",size:"small"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("\n            删除\n          ")])]}}])})],1)],1),s("div",{staticClass:"pagination-container"},[s("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","page-size":e.queryParams.pageObj.pageSize,"current-page":e.queryParams.pageObj.pageNum,total:e.listTotal},on:{"update:currentPage":function(t){return e.$set(e.queryParams.pageObj,"pageNum",t)},"update:current-page":function(t){return e.$set(e.queryParams.pageObj,"pageNum",t)},"current-change":e.handlePageCurrentChange}})],1),s("el-dialog",{attrs:{title:e.isEdit?"修改用户":"添加用户",visible:e.userEditDialogVisible,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(t){e.userEditDialogVisible=t},open:e.handlerUserEditDialogOpen}},[s("el-form",{ref:"userEditForm",attrs:{model:e.userEdit,rules:e.rules,"label-width":"150px",size:"small"}},[s("el-form-item",{attrs:{label:"用户名：",prop:"username"}},[s("el-input",{staticStyle:{width:"250px"},attrs:{disabled:e.isEdit,autocomplete:"off"},model:{value:e.userEdit.username,callback:function(t){e.$set(e.userEdit,"username",t)},expression:"userEdit.username"}})],1),s("el-form-item",{attrs:{label:"姓名：",prop:"realName"}},[s("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:e.userEdit.realName,callback:function(t){e.$set(e.userEdit,"realName",t)},expression:"userEdit.realName"}})],1),s("el-form-item",{attrs:{label:"角色：",prop:"roleId"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userEdit.roleId,callback:function(t){e.$set(e.userEdit,"roleId",t)},expression:"userEdit.roleId"}},e._l(e.roleIdOptions,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showEditPassword,expression:"showEditPassword"}],attrs:{label:"修改密码"}},[s("el-switch",{model:{value:e.editPassword,callback:function(t){e.editPassword=t},expression:"editPassword"}})],1),s("div",{staticClass:"block"},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showOldPassword,expression:"showOldPassword"}],attrs:{label:"原密码：",prop:"oldPassword"}},[s("el-input",{staticStyle:{width:"250px"},attrs:{type:"password",autocomplete:"off"},model:{value:e.userEdit.oldPassword,callback:function(t){e.$set(e.userEdit,"oldPassword",t)},expression:"userEdit.oldPassword"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showPassword,expression:"showPassword"}],attrs:{label:"密码：",prop:"password"}},[s("el-input",{staticStyle:{width:"250px"},attrs:{type:"password",autocomplete:"off","auto-complete":"new-password"},model:{value:e.userEdit.password,callback:function(t){e.$set(e.userEdit,"password",t)},expression:"userEdit.password"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showCheckPassword,expression:"showCheckPassword"}],attrs:{label:"确认密码：",prop:"checkPassword"}},[s("el-input",{staticStyle:{width:"250px"},attrs:{type:"password",autocomplete:"off"},model:{value:e.userEdit.checkPassword,callback:function(t){e.$set(e.userEdit,"checkPassword",t)},expression:"userEdit.checkPassword"}})],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.userEditDialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleUserEditDialogConfirm()}}},[e._v("确 定")])],1)],1)],1)},r=[],i=s("c24f"),o=s("cc5e"),l={username:"",realName:"",insertOnRange:["",""],pageObj:{pageNum:1,pageSize:10}},n={id:"",username:"",realName:"",roleId:"",roleName:"",oldPassword:"",password:"",checkPassword:""},d={components:{},data:function(){var e=this,t=function(e,t,s){t?s():s(new Error("请输入用户名"))},s=function(e,t,s){t?s():s(new Error("请输入姓名"))},a=function(e,t,s){t?s():s(new Error("请选择角色"))},r=function(t,s,a){e.showOldPassword&&!s?a(new Error("请输入原密码")):a()},i=function(t,s,a){e.showPassword&&!s?a(new Error("请输入密码")):a()},o=function(t,s,a){e.showCheckPassword?s?s!==e.userEdit.password?a(new Error("俩次输入密码不一致")):a():a(new Error("请再次输入密码")):a()};return{queryParams:Object.assign({},l),userEdit:Object.assign({},n),listLoading:!1,list:[],listTotal:null,userEditDialogVisible:!1,isEdit:!1,editPassword:!1,roleIdOptions:[],rules:{username:[{validator:t,trigger:"blur"}],realName:[{validator:s,trigger:"blur"}],roleId:[{validator:a,trigger:"blur"}],oldPassword:[{validator:r,trigger:"blur"}],password:[{validator:i,trigger:"blur"}],checkPassword:[{validator:o,trigger:"blur"}]}}},computed:{routerKey:function(){return this.$route.path},showEditPassword:function(){return this.isEdit},showOldPassword:function(){return this.isEdit&&this.editPassword},showPassword:function(){return this.editPassword||!this.isEdit},showCheckPassword:function(){return this.editPassword||!this.isEdit},queryParamsTrans:function(){var e={},t=this.queryParams,s=t.username,a=t.realName,r=t.insertOnRange,i=t.pageObj,o="",l="";return r&&(o=r[0],l=r[1]),s&&(e.username=s),a&&(e.realName=a),o&&(e.insertOnFrom=o),l&&(e.insertOnTo=l),e.pageNum=i.pageNum,e.pageSize=i.pageSize,e}},created:function(){this.getList(),this.getRoleIdOptions()},methods:{handleSearchList:function(){this.getList()},handleResetSearch:function(){this.queryParams=Object.assign({},l)},handleUpdate:function(e,t){this.userEditDialogVisible=!0,this.isEdit=!0,this.userEdit=Object.assign({},t)},handleDelete:function(e,t){var s=this;this.$confirm("是否要删除此人员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i["a"].remove(t.id).then((function(e){s.$message({type:"success",message:"删除成功!"}),s.getList()}))}))},handleAdd:function(){this.userEditDialogVisible=!0,this.isEdit=!1,this.userEdit=Object.assign({},n)},handlerUserEditDialogOpen:function(){},handleUserEditDialogConfirm:function(){var e=this;this.$refs.userEditForm.validate((function(t){if(!t)return!1;e.isEdit?i["a"].update(e.userEdit).then((function(t){e.$message({message:t.data,type:"success"}),e.userEditDialogVisible=!1,e.getList()})):i["a"].create(e.userEdit).then((function(t){e.$message({message:t.data,type:"success"}),e.userEditDialogVisible=!1,e.getList()}))}))},getList:function(){var e=this;this.listLoading=!0,i["a"].fetchList(this.queryParamsTrans).then((function(t){e.listLoading=!1;var s=t.data,a=s.list,r=s.total;e.list=a,e.listTotal=r})).catch((function(){e.listLoading=!1}))},getRoleIdOptions:function(){var e=this;o["a"].fetchList().then((function(t){e.roleIdOptions=t.data.list}))},handlePageCurrentChange:function(e){this.queryParams.pageNum=e,this.getList()}}},u=d,c=s("2877"),m=Object(c["a"])(u,a,r,!1,null,"86f78928",null);t["default"]=m.exports}}]);